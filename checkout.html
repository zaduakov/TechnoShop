<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Оформление заказа</title>
<style>
body { font-family: 'Segoe UI', sans-serif; background:#f5f5f7; margin:0; padding:20px; }
h2 { color:#d7000f; }
form { background:white; padding:20px; border-radius:10px; max-width:400px; margin:auto; box-shadow:0 0 15px rgba(0,0,0,.2); }
input, textarea { width:100%; padding:10px; margin-bottom:10px; border-radius:6px; border:1px solid #ccc; }
button { width:100%; padding:12px; border:none; border-radius:10px; background:#d7000f; color:white; cursor:pointer; font-size:16px; }
button:hover { background:#b2000b; }
ul { padding-left:20px; }
</style>
</head>
<body>

<h2>Оформление заказа</h2>

<h3>Ваши товары:</h3>
<ul id="orderList"></ul>
<div><strong>Итого: </strong><span id="orderTotal">0</span> ₸</div>

<form id="orderForm">
  <input type="text" id="customerName" placeholder="Ваше имя" required>
  <input type="text" id="customerPhone" placeholder="Телефон" required>
  <textarea id="customerAddress" placeholder="Адрес доставки" required></textarea>
  <button type="submit">Подтвердить заказ</button>
</form>

<script>
const cart = JSON.parse(localStorage.getItem('cartItems')) || [];
const orderList = document.getElementById('orderList');
const orderTotal = document.getElementById('orderTotal');

let total = 0;
cart.forEach(i=>{
  const li = document.createElement('li');
  li.textContent = `${i.name} x${i.qty} = ${(i.price*i.qty).toLocaleString()} ₸`;
  orderList.appendChild(li);
  total += i.price*i.qty;
});
orderTotal.textContent = total.toLocaleString();

// Обработка формы
document.getElementById('orderForm').addEventListener('submit', function(e){
  e.preventDefault();
  const name = document.getElementById('customerName').value.trim();
  const phone = document.getElementById('customerPhone').value.trim();
  const address = document.getElementById('customerAddress').value.trim();
  if(!name || !phone || !address){ alert("Заполните все поля!"); return; }

  let msg = "Заказ подтверждён!\n\nТовары:\n";
  cart.forEach(i=>{ msg += `${i.name} x${i.qty} = ${(i.price*i.qty).toLocaleString()} ₸\n`; });
  msg += `\nИтого: ${total.toLocaleString()} ₸\n`;
  msg += `\nИмя: ${name}\nТелефон: ${phone}\nАдрес: ${address}`;
  alert(msg);

  localStorage.removeItem('cartItems');
  window.location.href = 'index.html';
});
</script>
</body>
</html>
